{% extends 'layout.html' %}
{% from 'macros.html' import auction_status %}

{% macro row_class(bid) %}
  {%- if bid.confirmed %}
    {%- if bid == bid.auction.winning_bid %}
      positive
    {%- endif %}
  {%- else %}
    disabled
  {%- endif %}
{%- endmacro %}

{% block content %}

<h1>{{ auction.title }}</h1>

{{ auction_status(auction) }}

<h2>Bids</h2>

<table class="ui celled table">
  <thead>
    <tr>
      <th>Date</th>
      <th>Email</th>
      <th>Bidding Price</th>
    </tr>
  </thead>
  <tbody>
    {%- for bid in auction.ordered_bids %}
    <tr class="{{ row_class(bid) }}">
      <td>{{ bid.bids_at.strftime('%Y-%m-%d %H:%M:%S') }}</td>
      <td>{{ bid.censored_email }}</td>
      <td>
        <i class="icon {{ 'checkmark' if bid.confirmed else 'attention' }}"></i>
        {{ bid.disclosed_price|format_currency }}
      </td>
    </tr>
    {%- endfor %}
  </tbody>
</table>

{% endblock %}
